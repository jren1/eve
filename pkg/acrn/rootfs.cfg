set timeout=5
set gfxpayload=text
set default=0

set rootfs_title=EVE

function set_global {
   set $1="$2"
   export $1
}

function set_rootfs_title {
   cat -s rootfs_title /etc/eve-release
}

function set_generic {
   set_global linux /boot/kernel
}

set_rootfs_title
set_generic

menuentry "Boot ${rootfs_title}" {
	multiboot --quirk-modules-after-kernel /boot/acrn.32.out uart=bdf@0:18.0
	module $linux Linux_bzImage root=/dev/mmcblk0p2 textrw rootwait console=tty0 console=ttyS0 earlyprintk=ttyS0 consoleblank=0 no_timer_check quiet loglevel=3 i915.nuclear_pageflip=1 i915.avail_planes_per_pipe=0x01010F i915.domain_plane_owners=0x011111110000 i915.enable_gvt=1 hvlog=2M@0x5de00000 memmap=0x200000\$0x5de00000 memmap=0x400000\$0x5da00000 ramoops.mem_address=0x5da00000 ramoops.mem_size=0x400000 ramoops.console_size=0x200000 reboot_panic=p,w module_blacklist=dwc3_pci i915.enable_guc=0x02 cma=64M@0-
}
